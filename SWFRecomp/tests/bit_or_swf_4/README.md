# BIT_OR Opcode Test (0x61)

## Opcode Information

**Opcode Name**: BIT_OR
**Hex Value**: 0x61
**Category**: Bitwise Logic
**Description**: Performs bitwise OR operation on two 32-bit integers

## Operation

ActionBitOr pops two numbers off the stack, converts them to 32-bit unsigned integers, performs a bitwise OR operation, and pushes the result as a signed 32-bit integer (stored as float on stack).

## Test Cases

This test verifies the BIT_OR opcode with five test cases:

### Test Case 1: Basic bitwise OR
```actionscript
trace(12 | 10);
```
- Binary: 1100 | 1010 = 1110
- **Expected output**: `14`

### Test Case 2: OR with zero (identity)
```actionscript
trace(42 | 0);
```
- Any value OR 0 equals the original value
- **Expected output**: `42`

### Test Case 3: OR with all bits set
```actionscript
trace(10 | 15);
```
- Binary: 1010 | 1111 = 1111
- **Expected output**: `15`

### Test Case 4: Chained OR operations
```actionscript
trace(1 | 2 | 4);
```
- Binary: (001 | 010) | 100 = 011 | 100 = 111
- Combines multiple bit flags
- **Expected output**: `7`

### Test Case 5: Large numbers
```actionscript
trace(0xFF00 | 0x00FF);
```
- Combines high and low bytes
- 65280 | 255 = 65535
- **Expected output**: `65535`

## Expected Complete Output

```
14
42
15
7
65535
```

## Implementation Files

- **Enum**: `SWFRecomp/include/action/action.hpp` (SWF_ACTION_BIT_OR = 0x61)
- **Translation**: `SWFRecomp/src/action/action.cpp` (case SWF_ACTION_BIT_OR)
- **Declaration**: `SWFModernRuntime/include/actionmodern/action.h` (actionBitOr)
- **Implementation**: `SWFModernRuntime/src/actionmodern/action.c` (actionBitOr function)

## Building and Running

```bash
# Build the test
cd /home/user/SWFRecomp-CC/SWFRecomp
./scripts/build_test.sh bit_or_swf_4 native

# Run the test
./tests/bit_or_swf_4/build/native/bit_or_swf_4
```

## Test Generation

The test SWF is generated by `create_test_swf.py` which creates a minimal SWF4 file containing the ActionScript bytecode for all test cases.

## Notes

- The BIT_OR opcode performs bitwise OR on 32-bit integers
- Arguments are converted to 32-bit unsigned integers before the operation
- Result is a signed 32-bit integer
- All values are stored as floats on the ActionScript stack
- The | operator in C performs the bitwise OR operation
- OR with 0 is an identity operation (returns original value)
- OR is useful for combining bit flags and masks
